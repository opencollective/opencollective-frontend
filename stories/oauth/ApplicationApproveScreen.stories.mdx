import { ArgsTable, Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { ApplicationApproveScreen } from '../../components/oauth/ApplicationApproveScreen';
import { UserContext } from '../../components/UserProvider';
import { loggedInUser } from '../mocks/loggedInUser';
import ToastProvider from '../../components/ToastProvider';

export const testApp = {
  name: 'Test Application',
  clientId: 'test-client-id',
  redirectUri: 'http://localhost:3000/oauth/callback',
  account: {
    id: 'test-account-id',
    name: 'Test Account',
    slug: 'test-account',
    imageUrl: 'https://images.opencollective.com/github/fc5f232/logo/256.png',
  },
};

<Meta title="OAuth/ApplicationApproveScreen" component={ApplicationApproveScreen} />

<Canvas>
  <Story name="Default">
    {() => {
      return (
        <UserContext.Provider value={{ LoggedInUser: loggedInUser, loadingLoggedInUser: false }}>
          <ApplicationApproveScreen application={testApp} />
        </UserContext.Provider>
      );
    }}
  </Story>
</Canvas>

<Canvas>
  <Story name="Auto-approve (redirecting)">
    {() => {
      return (
        <UserContext.Provider value={{ LoggedInUser: loggedInUser, loadingLoggedInUser: false }}>
          <ApplicationApproveScreen autoApprove application={testApp} />
        </UserContext.Provider>
      );
    }}
  </Story>
</Canvas>
